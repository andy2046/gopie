

# cached
`import "github.com/andy2046/gopie/pkg/cached"`

* [Overview](#pkg-overview)
* [Index](#pkg-index)

## <a name="pkg-overview">Overview</a>
Package cached implements Caching Devil pattern.




## <a name="pkg-index">Index</a>
* [type Cache](#Cache)
* [type Cacher](#Cacher)
  * [func New(interval time.Duration, cache Cache, lessor Lessor, teller TruthTeller) Cacher](#New)
  * [func (c Cacher) Read(key string) []byte](#Cacher.Read)
* [type Lease](#Lease)
* [type Lessor](#Lessor)
* [type TruthTeller](#TruthTeller)


#### <a name="pkg-files">Package files</a>
[cached.go](/src/github.com/andy2046/gopie/pkg/cached/cached.go) 






## <a name="Cache">type</a> [Cache](/src/target/cached.go?s=698:1537#L29)
``` go
type Cache interface {
    // Get returns a list of []byte representing the values associated with the provided keys.
    // The value associated with a certain key will be in the same position in the returned list
    // as the key is in the keys list.
    Get(keys ...string) [][]byte

    // Set associates the provided value with the provided key in the cache layer.
    Set(key string, value []byte) error

    // AtomicAdd set the provided value for key if and only if the key has not already been set.
    // returns true if it succeeds, false otherwise.
    AtomicAdd(key string, value []byte) bool

    // AtomicCheckAndSet set the valueToSet for the provided key if and only if the key is currently associated with expectedValue.
    // returns true if it succeeds, false otherwise.
    AtomicCheckAndSet(key string, expectedValue, valueToSet []byte) bool
}
```
Cache represents the Caching layer.










## <a name="Cacher">type</a> [Cacher](/src/target/cached.go?s=1738:1839#L52)
``` go
type Cacher struct {
    // contains filtered or unexported fields
}
```
Cacher manages Caching Devil.







### <a name="New">func</a> [New](/src/target/cached.go?s=1951:2038#L62)
``` go
func New(interval time.Duration, cache Cache, lessor Lessor, teller TruthTeller) Cacher
```
New returns a new Cacher.
interval is the retry waiting time if another request is holding the lease.





### <a name="Cacher.Read">func</a> (Cacher) [Read](/src/target/cached.go?s=2212:2251#L72)
``` go
func (c Cacher) Read(key string) []byte
```
Read try to retrieve the value associated with the provided key.




## <a name="Lease">type</a> [Lease](/src/target/cached.go?s=169:243#L8)
``` go
type Lease interface {
    // Nonce is unique for each Lease.
    Nonce() string
}
```
Lease is a per-cache-key lock preventing thundering herds and stale sets.










## <a name="Lessor">type</a> [Lessor](/src/target/cached.go?s=278:655#L14)
``` go
type Lessor interface {
    // NewLease create a new Lease.
    NewLease() Lease

    // FromValue construct a Lease from nonce value.
    FromValue(nonce []byte) (Lease, error)

    // MustFromValue is like FromValue but panics if nonce value is not a Lease.
    MustFromValue(nonce []byte) Lease

    // IsLease returns true if value is a Lease, false otherwise.
    IsLease(value []byte) bool
}
```
Lessor is the Lease helper.










## <a name="TruthTeller">type</a> [TruthTeller](/src/target/cached.go?s=1666:1701#L49)
``` go
type TruthTeller func(key string) []byte
```
TruthTeller is the function to fetch the value associated with the looked up key
from the source of truth data store.














- - -
Generated by [godoc2md](http://godoc.org/github.com/davecheney/godoc2md)
